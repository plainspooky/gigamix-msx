Device Driver: 忍者タップ用             
Copyright (c) 1996-2020 MSX Club Gigamix

■概要

　MSX用対戦ゲームの制作時に用いたDMシステム2用デバイスドライバです。
MSX用マルチタップ「忍者タップ」(PCCM製)に対応しています。※同人ハードウェア
最大4人分のボタン入力を同時認識できます。


■インストール方法

　DMシステム2・ユーティリティーディスクのSETUPツールでこのドライバを選択
するのを推奨しますが、手動でインストールする方法をご説明します。

	CLEAR 200,&HC000
	BLOAD "dev-laby.bin",R


■ＤＭシステム上から使う！

　　このドライバをインストールすることにより、dmm命令で忍者タップからの
　入力を受けることが出来ます。

　　実際の動作はシステムの処理(タイマー割り込みの接続など)に加えて以下
　のようになります。

　　DMMINI	ポートに接続されている忍者タップを認識する。
		ターボＲであればＣＰＵ切り替えのための自己書き換えを行う。
		＊忍者タップＡＰ規格の機器はすべて忍者タップと認識する。

　　DMM		キーボード１、キーボード２、ポートに接続されているすべて
		のパッドの状態をワークエリア(7800H+1F6H)に保存する。


■マシンゴから使う！コールエントリ

7800H+30H+12	GET4P	４人分の入力結果を得る
	(= 783FH)
	Entry	なし
	Return	HL= 結果へのポインタ(常に7800H+22)
	Use	すべて

　　プレイヤーテーブル(7800H+4)で選択された４本のパッド入力結果をワーク
　エリアに書き込み、そこへのポインタを返す。


■ワークエリア

7800H+4　プレイヤーテーブル
		一人につき１バイトの４人分
		0　  キーボード１(カーソルとメ･ロ)
		1　　キーボード２(DEFSと TAB･CTRL)
		2-9　ポートに接続されているパッド
		10　 コンピュータ(未定)

7800H+22　キーデータ(プレイヤー１〜４)
		一人につき１バイトの４人分
		ビット７から　A,B,?,?,U,D,L,R　の順に負論理で格納される。

7800H+1F6H　キーデータオール(すべてのパッド)
		キーボード１、キーボード２、パッド(最大８本)、それぞれ１
		バイトの１０本分
		ビット７から　A,B,?,?,U,D,L,R　の順に負論理で格納される。


■その他

7800H+8　キーボード１，２用マトリクスデータ
	+0 マトリクス行 + 0E5H
	+1 ビットマスク値(01H,02H,04H,08H,10H,20H,40H,80H)
		トリガＡ，トリガＢ，ダミー，ダミー，上，下，左，右
		計１６バイト×２


■バージョンアップ履歴

95/08/29

　　２７日に渡し忘れたマジラビ専用デバドラ・バグ取れバージョンです。
　　GET4Pの B'レジスタの内容がおかしかったのを直しました。
　　同じものをMattyaさんにもバイナリメールしておきます。

						いんふるえんざ


■コピーライト・利用条件

当ソフトウェアの著作権はMSX Club Gigamix(略称:Gigamix)が所有しています。
当ソフトウェアで用いられている全てのバイナリおよびソースコードは、
Apache 2.0ライセンスで配布します。

当ソフトウェアは誰でも自由に複製・改変し、使用・販売することができます。
ソースリストも添付します。ご自身のプログラムに組み込むことができます。
当ソフトウェアを利用した結果生じたいかなる障害に対して、
作者は一切の責任を負いません。使用者の責任のもとに使用してください。

当ソフトウェアは、Apache 2.0ライセンスで配布された製作物が含まれます。
This software includes the work that is distributed in the Apache License 2.0.
http://www.apache.org/licenses/LICENSE-2.0


■連絡先

Website https://www.gigamix.jp/
Twitter @nf_ban (Takashi Kobayashi)
E-mail nf_ban@gigamix.jp (Takashi Kobayashi)
